<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="./default.css">
<script type="text/javascript">
function storage(id){ obj=(document.all)?document.all(id):((document.getElementById)?document.getElementById(id):null); if(obj) obj.style.display=(obj.style.display=="none")?"block":"none"; }
</script>
<title>松浦望のウェブページ</title>
</head>
<body>
TeXのバッドノウハウ
<ul>
<li><a href="#smash" onclick="storage('smash');return false">高さをつぶす</a>
<div id="smash" style="display:none">
表などで文字組を乱したくない場合に使う。
<pre>
\smash{テキスト}
</pre>
</div>
<li><a href="#rule" onclick="storage('rule');return false">高さを広げる</a>
<div id="rule" style="display:none">
\rule は幅と高さを指定して長方形を描くマクロだけれど、幅を 0pt とすれば、見えない柱を立てることができる。
<pre>
\rule[上への移動量]{幅}{高さ}
</pre>
</div>
<li><a href="#raiselower" onclick="storage('raiselower');return false">上下位置の調整</a>
<div id="raiselower" style="display:none">
<pre>
\raise上への移動量\hbox{テキスト}
\lower下への移動量\hbox{テキスト}
\raisebox{raise_len}[height][depth]{テキスト}
</pre>
</div>
<li><a href="#float" onclick="storage('float');return false">図は指定した位置に入れたい</a>
<div id="float" style="display:none">
図の挿入位置が勝手に動かされるのいや。
たとえば横に2枚並べるときは次のようにする。
<pre>
\usepackage{float}
\begin{figure}[H]
\begin{minipage}{.5\linewidth}
\includegraphics[width=\linewidth]{図のファイル名}
\caption{キャプション}
\end{minipage}
\begin{minipage}{.5\linewidth}
\includegraphics[width=\linewidth]{図のファイル名}
\caption{キャプション}
\end{minipage}
\end{figure}
</pre>
</div>
<li><a href="#b5" onclick="storage('b5');return false">B5版の原稿</a>
<div id="b5" style="display:none">
ソースファイルの雛型。
<pre>
\documentclass[10pt,b5j]{jarticle}
\AtBeginDvi{\special{pdf: pagesize width 182truemm height 257truemm}}
\setlength{\paperwidth}{182mm}
\setlength{\paperheight}{257mm}
\setlength{\textwidth}{152mm}
\setlength{\textheight}{227mm}
% 以下は天地中央にするための設定
\setlength{\hoffset}{-1.0in}
\setlength{\voffset}{-1.0in}
\setlength{\headheight}{0pt}
\setlength{\headsep}{0pt}
\newlength{\dummylength}
\setlength{\dummylength}{\paperwidth}
\addtolength{\dummylength}{-\textwidth}
\setlength{\oddsidemargin}{.5\dummylength}
\setlength{\dummylength}{\paperheight}
\addtolength{\dummylength}{-\textheight}
\setlength{\topmargin}{.5\dummylength}
\begin{document}
\end{document}
</pre>
</div>
<li><a href="#2versions" onclick="storage('2versions');return false">論文を二版つくる</a>
<div id="2versions" style="display:none">
論文を簡潔にまとめるためにしばしば計算の詳細を省いたりするけれど、後で読みなおした時にはたいてい細部の要点を忘れてしまっていて、とても読みづらい。だから出版用と自分用の二種類を作っておきたい。あるいは試験問題なんかを作るときに、問題文と解答例の二種類が作りたかったりもする。ひとつのソースファイルで二種類の pdf を作るにはどうすればよいか。出版用を note.pdf 自分用を note_detail.pdf という名前にするとき、ソースファイル名は note.tex として、そのプリアンブルに
<pre>
\newif\ifdetail
\ifx\DETAIL\DUMMY\else\detailtrue\fi
</pre>
</blockquote>
と書いておく。このとき note.tex をコンパイルすると \else の前の空文が実行されて（なぜなら \DETAIL も \DUMMY もともに定義されておらず、その意味で「等しい」と判断されるから）\detailtrue は実行されない。したがって本文中で
<pre>
\ifdetail
自分用の文章
\else
出版用の文章
\fi
</pre>
と書いたところでは「出版用の文章」がコンパイルされる。これとは別に
<pre>
\def\DETAIL{detail}
\input{note.tex}
</pre>
とだけ書いた note_detail.tex を用意しておく。今度は \DETAIL が detail と定義されたことで \DUMMY とは異なるから、コンパイル時には \detailtrue が実行されて、したがって本文中の分岐では「自分用の文章」が選ばれる。
</div>
<li><a href="#1in2" onclick="storage('1in2');return false">二段組の文章中に一段組の部分を作る</a>
<div id="1in2" style="display:none">
<pre>
\usepackage{multicol}
\setlength{\columnseprule}{0.4pt}
\setlength{\columnsep}{10mm}
\begin{multicols}{2}
ここは二段組
\end{multicols}
\begin{multicols*}{2}[%
ここだけ一段組になる
]
また二段組にもどる
\end{multicols*}
</pre>
</div>
<li><a href="#moreverb" onclick="storage('moreverb');return false">プログラムのソースコードを載せたい</a>
<div id="moreverb" style="display:none">
moreverb パッケージを使う。
プログラムのソースファイルを verbatim 環境のなかに読み込んで、かつ、
タブを指定した幅の空白文字に置き換えることができる。
<pre>
\usepackage{moreverb}
\verbatimtabinput[4]{sample.c}
</pre>
</div>
<li><a href="#alltt" onclick="storage('alltt');return false">verbatim環境の中でコマンドが使いたい</a>
<div id="alltt" style="display:none">
verbatim 環境をやめて alltt 環境にする。
<pre>
\usepackage{alltt}
\usepackage[usenames]{color}
\begin{alltt}
Hello,
\textcolor{red}{world}.
\end{alltt}
</pre>
</div>
</ul>
</body>
</html>
